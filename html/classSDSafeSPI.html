<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>libpropeller: SDSafeSPI Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="libpropeller_bird_icon.JPG"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">libpropeller
   </div>
   <div id="projectbrief">Making PropellerGCC Easier</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classSDSafeSPI-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SDSafeSPI Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>SPI interface routines for <a class="el" href="classSD.html" title="FAT16/32 SD card interface.">SD</a> &amp; SDHC &amp; MMC cards.  
 <a href="classSDSafeSPI.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="sdsafespi_8h_source.html">sdsafespi.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1432adbfa1ebda5805d825fc0eb16993"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a1432adbfa1ebda5805d825fc0eb16993">Start</a> (const int basepin)</td></tr>
<tr class="memdesc:a1432adbfa1ebda5805d825fc0eb16993"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a new cog with the SPI driver.  <a href="#a1432adbfa1ebda5805d825fc0eb16993">More...</a><br/></td></tr>
<tr class="separator:a1432adbfa1ebda5805d825fc0eb16993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9de84de3318b6875f560a192dcd73f56"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a9de84de3318b6875f560a192dcd73f56">Start</a> (const int pin_do, const int pin_clk, const int pin_di, const int pin_cs)</td></tr>
<tr class="memdesc:a9de84de3318b6875f560a192dcd73f56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a new cog with the SPI driver.  <a href="#a9de84de3318b6875f560a192dcd73f56">More...</a><br/></td></tr>
<tr class="separator:a9de84de3318b6875f560a192dcd73f56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5fdb2d48b2b578050a611e79250090f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#ae5fdb2d48b2b578050a611e79250090f">ReadBlock</a> (const int block_index, char *buffer_address)</td></tr>
<tr class="separator:ae5fdb2d48b2b578050a611e79250090f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7285fcb8b5c455820b10deece71efd86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a7285fcb8b5c455820b10deece71efd86">WriteBlock</a> (const int block_index, char *buffer_address)</td></tr>
<tr class="separator:a7285fcb8b5c455820b10deece71efd86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae74174a2ead99e536e2942feb9019b76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#ae74174a2ead99e536e2942feb9019b76">ReleaseCard</a> (void)</td></tr>
<tr class="memdesc:ae74174a2ead99e536e2942feb9019b76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the SPI bus and allow other devices to use it.  <a href="#ae74174a2ead99e536e2942feb9019b76">More...</a><br/></td></tr>
<tr class="separator:ae74174a2ead99e536e2942feb9019b76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7273706623ea9f1c6ee0ecb65e1240db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a7273706623ea9f1c6ee0ecb65e1240db">Stop</a> (void)</td></tr>
<tr class="memdesc:a7273706623ea9f1c6ee0ecb65e1240db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kill the assembly driver cog.  <a href="#a7273706623ea9f1c6ee0ecb65e1240db">More...</a><br/></td></tr>
<tr class="separator:a7273706623ea9f1c6ee0ecb65e1240db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c58e3f57f90f70ea094409f3dbcab0b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a2c58e3f57f90f70ea094409f3dbcab0b">HasError</a> (void) const </td></tr>
<tr class="memdesc:a2c58e3f57f90f70ea094409f3dbcab0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">If there was an error in the <a class="el" href="classSD.html" title="FAT16/32 SD card interface.">SD</a> routines then this function will return an error code.  <a href="#a2c58e3f57f90f70ea094409f3dbcab0b">More...</a><br/></td></tr>
<tr class="separator:a2c58e3f57f90f70ea094409f3dbcab0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4608c282f5225c559fa836d9867e6e81"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a4608c282f5225c559fa836d9867e6e81">ClearError</a> (void)</td></tr>
<tr class="memdesc:a4608c282f5225c559fa836d9867e6e81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the error flag to kNoError.  <a href="#a4608c282f5225c559fa836d9867e6e81">More...</a><br/></td></tr>
<tr class="separator:a4608c282f5225c559fa836d9867e6e81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e1ffae3b9b42e54b50ebab0f37429dd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a9e1ffae3b9b42e54b50ebab0f37429dd">GetError</a> (void) const </td></tr>
<tr class="separator:a9e1ffae3b9b42e54b50ebab0f37429dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a599fa5cb3e6f88bf688dc9554b305630"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a599fa5cb3e6f88bf688dc9554b305630">kCardTypeMMC</a> = 1</td></tr>
<tr class="separator:a599fa5cb3e6f88bf688dc9554b305630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa961e90af8b72c2c342ac98ddf68bb79"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#aa961e90af8b72c2c342ac98ddf68bb79">kCardTypeSD</a> = 2</td></tr>
<tr class="separator:aa961e90af8b72c2c342ac98ddf68bb79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b54abef53f17485ab16691cd433f27d"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a5b54abef53f17485ab16691cd433f27d">kCardTypeSDHC</a> = 3</td></tr>
<tr class="separator:a5b54abef53f17485ab16691cd433f27d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dd257a5288de85657709debc3119bb9"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a0dd257a5288de85657709debc3119bb9">kNoError</a> = 0</td></tr>
<tr class="separator:a0dd257a5288de85657709debc3119bb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae65adf14818cf1813e446101c6386e88"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#ae65adf14818cf1813e446101c6386e88">kErrorCardNotReset</a> = -1</td></tr>
<tr class="separator:ae65adf14818cf1813e446101c6386e88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa50a1d9718610d6616ddeeaadd902261"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#aa50a1d9718610d6616ddeeaadd902261">kError3v3NotSupported</a> = -2</td></tr>
<tr class="separator:aa50a1d9718610d6616ddeeaadd902261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f6513b74c1d1d9666228815d8c636e"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a73f6513b74c1d1d9666228815d8c636e">kErrorOcrFailed</a> = -3</td></tr>
<tr class="separator:a73f6513b74c1d1d9666228815d8c636e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3da5f9e382cb18ff14e0de670390c4eb"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a3da5f9e382cb18ff14e0de670390c4eb">kErrorBlockNotLongAligned</a> = -4</td></tr>
<tr class="separator:a3da5f9e382cb18ff14e0de670390c4eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9355ca8556ca31b0a5d86f5cf78f812d"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a9355ca8556ca31b0a5d86f5cf78f812d">kErrorAsmNoReadToken</a> = 100</td></tr>
<tr class="separator:a9355ca8556ca31b0a5d86f5cf78f812d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aea9d65f03018f78250406e1ad495f6"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a0aea9d65f03018f78250406e1ad495f6">kErrorAsmBlockNotWritten</a> = 101</td></tr>
<tr class="separator:a0aea9d65f03018f78250406e1ad495f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b1464bfe0554b15e82c1ba1df724752"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a0b1464bfe0554b15e82c1ba1df724752">kErrorSpiEngineNotRunning</a> = -999</td></tr>
<tr class="separator:a0b1464bfe0554b15e82c1ba1df724752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e6f491ebe2acfbbe4022ce3d66ad262"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDSafeSPI.html#a1e6f491ebe2acfbbe4022ce3d66ad262">kErrorCardBusyTimeout</a> = -1000</td></tr>
<tr class="separator:a1e6f491ebe2acfbbe4022ce3d66ad262"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>SPI interface routines for <a class="el" href="classSD.html" title="FAT16/32 SD card interface.">SD</a> &amp; SDHC &amp; MMC cards. </p>
<p>C++ conversion by SRLM, based on sdsafespi.spin version 0.3.0 by Jonathan "lonesock" Dummer.</p>
<p>This uses multiblock SPI mode exclusively.</p>
<p>This is the "SAFE" version...uses</p>
<ul>
<li>1 instruction per bit writes</li>
<li>2 instructions per bit reads</li>
</ul>
<dl class="section warning"><dt>Warning</dt><dd>You should check the error code after each function call. Something may have gone wrong, and this is the only way to know! If there is an error, the safest thing to do would be to destroy the object instance, fix the error, and try again. For some errors, it may be ok to simply clear the error and try again.</dd></dl>
<p>Notes:</p>
<ul>
<li>It appears that negative Spi_command is never used in the assembly code. This looks like an old error possibility that is no longer used. Can we take it out?</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000011">Todo:</a></b></dt><dd>(SRLM): Convert the <a class="el" href="classSD.html" title="FAT16/32 SD card interface.">SD</a> SPI driver to GAS instead of binary.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>SRLM (<a href="#" onclick="location.href='mai'+'lto:'+'srl'+'m@'+'srl'+'mp'+'rod'+'uc'+'tio'+'ns'+'.co'+'m'; return false;">srlm@<span style="display: none;">.nosp@m.</span>srlm<span style="display: none;">.nosp@m.</span>produ<span style="display: none;">.nosp@m.</span>ctio<span style="display: none;">.nosp@m.</span>ns.co<span style="display: none;">.nosp@m.</span>m</a>) </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4608c282f5225c559fa836d9867e6e81"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SDSafeSPI::ClearError </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets the error flag to kNoError. </p>

</div>
</div>
<a class="anchor" id="a9e1ffae3b9b42e54b50ebab0f37429dd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int SDSafeSPI::GetError </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2c58e3f57f90f70ea094409f3dbcab0b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SDSafeSPI::HasError </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If there was an error in the <a class="el" href="classSD.html" title="FAT16/32 SD card interface.">SD</a> routines then this function will return an error code. </p>
<dl class="section return"><dt>Returns</dt><dd>The error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ae5fdb2d48b2b578050a611e79250090f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SDSafeSPI::ReadBlock </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>block_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae74174a2ead99e536e2942feb9019b76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SDSafeSPI::ReleaseCard </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release the SPI bus and allow other devices to use it. </p>
<p>The SPI bus is re-acquired the next time a block is transfered.</p>
<dl class="section warning"><dt>Warning</dt><dd>If you release the lines, make sure that the other devices are not using the bus the next time you do an <a class="el" href="classSD.html" title="FAT16/32 SD card interface.">SD</a> operation. </dd></dl>

</div>
</div>
<a class="anchor" id="a1432adbfa1ebda5805d825fc0eb16993"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int SDSafeSPI::Start </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>basepin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start a new cog with the SPI driver. </p>
<dl class="section warning"><dt>Warning</dt><dd>requires that the pins be both consecutive, and in the order<ol type="1">
<li>DO</li>
<li>CLK</li>
<li>DI</li>
<li>CS</li>
</ol>
</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The card type constant. </dd></dl>

</div>
</div>
<a class="anchor" id="a9de84de3318b6875f560a192dcd73f56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int SDSafeSPI::Start </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>pin_do</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>pin_clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>pin_di</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>pin_cs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start a new cog with the SPI driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin_do</td><td></td></tr>
    <tr><td class="paramname">pin_clk</td><td></td></tr>
    <tr><td class="paramname">pin_di</td><td></td></tr>
    <tr><td class="paramname">pin_cs</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The card type constant. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classSDSafeSPI_a9de84de3318b6875f560a192dcd73f56_cgraph.png" border="0" usemap="#classSDSafeSPI_a9de84de3318b6875f560a192dcd73f56_cgraph" alt=""/></div>
<map name="classSDSafeSPI_a9de84de3318b6875f560a192dcd73f56_cgraph" id="classSDSafeSPI_a9de84de3318b6875f560a192dcd73f56_cgraph">
<area shape="rect" id="node3" href="classSDSafeSPI.html#a7273706623ea9f1c6ee0ecb65e1240db" title="Kill the assembly driver cog." alt="" coords="181,5,307,35"/><area shape="rect" id="node5" href="classSDSafeSPI.html#ae74174a2ead99e536e2942feb9019b76" title="Release the SPI bus and allow other devices to use it." alt="" coords="356,5,529,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7273706623ea9f1c6ee0ecb65e1240db"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SDSafeSPI::Stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Kill the assembly driver cog. </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classSDSafeSPI_a7273706623ea9f1c6ee0ecb65e1240db_cgraph.png" border="0" usemap="#classSDSafeSPI_a7273706623ea9f1c6ee0ecb65e1240db_cgraph" alt=""/></div>
<map name="classSDSafeSPI_a7273706623ea9f1c6ee0ecb65e1240db_cgraph" id="classSDSafeSPI_a7273706623ea9f1c6ee0ecb65e1240db_cgraph">
<area shape="rect" id="node3" href="classSDSafeSPI.html#ae74174a2ead99e536e2942feb9019b76" title="Release the SPI bus and allow other devices to use it." alt="" coords="180,5,353,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7285fcb8b5c455820b10deece71efd86"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SDSafeSPI::WriteBlock </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>block_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a599fa5cb3e6f88bf688dc9554b305630"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int SDSafeSPI::kCardTypeMMC = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa961e90af8b72c2c342ac98ddf68bb79"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int SDSafeSPI::kCardTypeSD = 2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5b54abef53f17485ab16691cd433f27d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int SDSafeSPI::kCardTypeSDHC = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa50a1d9718610d6616ddeeaadd902261"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int SDSafeSPI::kError3v3NotSupported = -2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0aea9d65f03018f78250406e1ad495f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int SDSafeSPI::kErrorAsmBlockNotWritten = 101</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9355ca8556ca31b0a5d86f5cf78f812d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int SDSafeSPI::kErrorAsmNoReadToken = 100</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3da5f9e382cb18ff14e0de670390c4eb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int SDSafeSPI::kErrorBlockNotLongAligned = -4</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1e6f491ebe2acfbbe4022ce3d66ad262"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int SDSafeSPI::kErrorCardBusyTimeout = -1000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae65adf14818cf1813e446101c6386e88"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int SDSafeSPI::kErrorCardNotReset = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a73f6513b74c1d1d9666228815d8c636e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int SDSafeSPI::kErrorOcrFailed = -3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0b1464bfe0554b15e82c1ba1df724752"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int SDSafeSPI::kErrorSpiEngineNotRunning = -999</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0dd257a5288de85657709debc3119bb9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int SDSafeSPI::kNoError = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="sdsafespi_8h_source.html">sdsafespi.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 23 2013 05:26:10 for libpropeller by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
