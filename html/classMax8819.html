<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>libpropeller: Max8819 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="libpropeller_bird_icon.JPG"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">libpropeller
   </div>
   <div id="projectbrief">Making PropellerGCC Easier</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classMax8819-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Max8819 Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Max8819.h - <a class="el" href="classMax8819.html" title="Max8819.h - Max8819 class to allow access to single pins. ">Max8819</a> class to allow access to single pins.  
 <a href="classMax8819.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="max8819_8h_source.html">max8819.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aaebcaac689a1da2c31756575bc6f2432"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classMax8819.html#aaebcaac689a1da2c31756575bc6f2432a2098cb07de62b0ba4961814a0530cda7">HIGH</a>, 
<a class="el" href="classMax8819.html#aaebcaac689a1da2c31756575bc6f2432aad0ccc3006f638f01bf40f968eef34af">MEDIUM</a>, 
<a class="el" href="classMax8819.html#aaebcaac689a1da2c31756575bc6f2432ade896e2196d7fa6824b2ead3da43cc14">LOW</a>, 
<a class="el" href="classMax8819.html#aaebcaac689a1da2c31756575bc6f2432aeb8a3e0a8f089a1e4762abf9fd0fe944">OFF</a>
 }</td></tr>
<tr class="separator:aaebcaac689a1da2c31756575bc6f2432"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aaa1865afcceea8b5296975747af2e78f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMax8819.html#aaa1865afcceea8b5296975747af2e78f">Start</a> (int CENpin, int CHGpin, int ENpin, int DLIM1pin, int DLIM2pin)</td></tr>
<tr class="memdesc:aaa1865afcceea8b5296975747af2e78f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the MAX8819 object, turn the power on, and turn off charging.  <a href="#aaa1865afcceea8b5296975747af2e78f">More...</a><br/></td></tr>
<tr class="separator:aaa1865afcceea8b5296975747af2e78f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33d6b41b74d425c571bd8645f00ba442"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMax8819.html#a33d6b41b74d425c571bd8645f00ba442">~Max8819</a> ()</td></tr>
<tr class="separator:a33d6b41b74d425c571bd8645f00ba442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a701e194e002d69753ae5c21cdafbb20f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMax8819.html#a701e194e002d69753ae5c21cdafbb20f">On</a> ()</td></tr>
<tr class="memdesc:a701e194e002d69753ae5c21cdafbb20f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn the power system on.  <a href="#a701e194e002d69753ae5c21cdafbb20f">More...</a><br/></td></tr>
<tr class="separator:a701e194e002d69753ae5c21cdafbb20f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf199d87b1520ec2bf98cf3f5b40bf9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMax8819.html#aaf199d87b1520ec2bf98cf3f5b40bf9f">Off</a> ()</td></tr>
<tr class="memdesc:aaf199d87b1520ec2bf98cf3f5b40bf9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn the power system off.  <a href="#aaf199d87b1520ec2bf98cf3f5b40bf9f">More...</a><br/></td></tr>
<tr class="separator:aaf199d87b1520ec2bf98cf3f5b40bf9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4161938c80bd3a7ffc9710b00171b994"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMax8819.html#a4161938c80bd3a7ffc9710b00171b994">GetCharge</a> ()</td></tr>
<tr class="memdesc:a4161938c80bd3a7ffc9710b00171b994"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if the battery is being charged.  <a href="#a4161938c80bd3a7ffc9710b00171b994">More...</a><br/></td></tr>
<tr class="separator:a4161938c80bd3a7ffc9710b00171b994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a019ba1275d93276c8d982e06faa169d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMax8819.html#a019ba1275d93276c8d982e06faa169d6">SetCharge</a> (int rate)</td></tr>
<tr class="memdesc:a019ba1275d93276c8d982e06faa169d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the charge rate.  <a href="#a019ba1275d93276c8d982e06faa169d6">More...</a><br/></td></tr>
<tr class="separator:a019ba1275d93276c8d982e06faa169d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a150cf2afcdadd9882e7b3ebc49bca9bf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMax8819.html#a150cf2afcdadd9882e7b3ebc49bca9bf">GetPluggedIn</a> (void)</td></tr>
<tr class="separator:a150cf2afcdadd9882e7b3ebc49bca9bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Max8819.h - <a class="el" href="classMax8819.html" title="Max8819.h - Max8819 class to allow access to single pins. ">Max8819</a> class to allow access to single pins. </p>
<p>The low level interface code is based on Pins.h from David Michael Betz.</p>
<p>Requires a 10k resistor from MAX8819A::CEN to 5V USB.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>Add support (is it neccessary?) For the "timer fault" condition (figure 3, page 18 of datasheet) when CHG outputs a 2Hz square wave.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>SRLM (<a href="#" onclick="location.href='mai'+'lto:'+'srl'+'m@'+'srl'+'mp'+'rod'+'uc'+'tio'+'ns'+'.co'+'m'; return false;">srlm@<span style="display: none;">.nosp@m.</span>srlm<span style="display: none;">.nosp@m.</span>produ<span style="display: none;">.nosp@m.</span>ctio<span style="display: none;">.nosp@m.</span>ns.co<span style="display: none;">.nosp@m.</span>m</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1-1-2013 </dd></dl>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="aaebcaac689a1da2c31756575bc6f2432"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="aaebcaac689a1da2c31756575bc6f2432a2098cb07de62b0ba4961814a0530cda7"></a>HIGH</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaebcaac689a1da2c31756575bc6f2432aad0ccc3006f638f01bf40f968eef34af"></a>MEDIUM</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaebcaac689a1da2c31756575bc6f2432ade896e2196d7fa6824b2ead3da43cc14"></a>LOW</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaebcaac689a1da2c31756575bc6f2432aeb8a3e0a8f089a1e4762abf9fd0fe944"></a>OFF</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a33d6b41b74d425c571bd8645f00ba442"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Max8819::~Max8819 </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4161938c80bd3a7ffc9710b00171b994"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Max8819::GetCharge </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks to see if the battery is being charged. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>If SetCharge is set to off, and it's plugged in, what does GetCharge return? </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>the charging status of the battery. True indicates charging, false indicates no charging. </dd></dl>

</div>
</div>
<a class="anchor" id="a150cf2afcdadd9882e7b3ebc49bca9bf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Max8819::GetPluggedIn </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aaf199d87b1520ec2bf98cf3f5b40bf9f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Max8819::Off </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Turn the power system off. </p>
<dl class="section warning"><dt>Warning</dt><dd>includes Propeller power, so this had better be the last thing in the program. </dd></dl>

</div>
</div>
<a class="anchor" id="a701e194e002d69753ae5c21cdafbb20f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Max8819::On </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Turn the power system on. </p>
<p>The I/O holds the power on until <em><a class="el" href="classMax8819.html#aaf199d87b1520ec2bf98cf3f5b40bf9f" title="Turn the power system off. ">Off()</a></em> is called. </p>

</div>
</div>
<a class="anchor" id="a019ba1275d93276c8d982e06faa169d6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Max8819::SetCharge </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rate</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the charge rate. </p>
<p>Valid constants are: -OFF -LOW -MEDIUM -HIGH Note: The rate is set even if there is currently no external power, and stays in effect until next called (possibly during the connection of external power).</p>
<dl class="section warning"><dt>Warning</dt><dd>If set to OFF it cuts off all power from the USB port. This means that if there is no battery the system will turn off!</dd>
<dd>
If it's set to something other than OFF then the maximum current from the USB port is limited. If there is no battery then you must make sure that the total current consumed is less than the maximum, otherwise the MAX8819 might reset.</dd></dl>
<p>With a 3kOhm CISET resistor, we have the following charge rates: -LOW == 95 mA -MEDIUM == 475 mA -HIGH == 1000 mA</p>
<p>From the datasheet: It is not necessary to limit the charge current based on the capabilities of the expected AC-toDC adapter or USB/DC input current limit, the system load, or thermal limitations of the PCB. The IC automatically lowers the charging current as necessary to accommodate for these factors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rate</td><td>a constant specifying the rate of charge. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aaa1865afcceea8b5296975747af2e78f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Max8819::Start </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>CENpin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>CHGpin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ENpin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>DLIM1pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>DLIM2pin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create the MAX8819 object, turn the power on, and turn off charging. </p>
<dl class="section warning"><dt>Warning</dt><dd>pmic-&gt;SetCharge(Max8819::HIGH); (SRLM): There is some sort of bug where this <em>must</em> be in the code, otherwise it causes a reset.</dd></dl>
<p>The pins from the Propeller to the MAX8819 can be connected directly: no need for current limiting resistors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">CENpin</td><td>The pin connected to Charge Enable on the MAX8819 </td></tr>
    <tr><td class="paramname">CHGpin</td><td>The pin connected to (is) Charge(ing?) pin on the MAX8819 </td></tr>
    <tr><td class="paramname">ENpin</td><td>The pin connected to Enable123 pin on the MAX8819 </td></tr>
    <tr><td class="paramname">DLIM1pin</td><td>The pin connected to DLIM1 pin on the MAX8819 </td></tr>
    <tr><td class="paramname">DLIM2pin</td><td>The pin connected to DLIM2 pin on the MAX8819 </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classMax8819_aaa1865afcceea8b5296975747af2e78f_cgraph.png" border="0" usemap="#classMax8819_aaa1865afcceea8b5296975747af2e78f_cgraph" alt=""/></div>
<map name="classMax8819_aaa1865afcceea8b5296975747af2e78f_cgraph" id="classMax8819_aaa1865afcceea8b5296975747af2e78f_cgraph">
<area shape="rect" id="node3" href="classMax8819.html#a701e194e002d69753ae5c21cdafbb20f" title="Turn the power system on. " alt="" coords="189,5,288,35"/><area shape="rect" id="node5" href="classMax8819.html#a019ba1275d93276c8d982e06faa169d6" title="Sets the charge rate. " alt="" coords="167,59,311,88"/></map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="max8819_8h_source.html">max8819.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 25 2013 23:41:46 for libpropeller by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
